{% extends "base.html" %}

{% block content %}

<div class="content-wrapper">
    <!-- Abas -->
    <div class="tabs">
        <div class="tab active" onclick="showTab('all')">Tudo</div>
        <div class="tab" onclick="showTab('mentions')">Menções</div>
    </div>

    <!-- Conteúdo das notificações -->

    <!-- notifications.html -->

    <h1>Notificações</h1>
    {% if notifications %}
    <div class="notifications-wrapper">
        <ul>
            {% for notification in notifications %}
            <li>
                <strong>{{ notification.like_user.username }}</strong> {{ notification.notification_type }} o post
                "<em>{{ notification.post.content|slice:":30" }}</em>"
                <br>
                <small>Postado {{ notification.created_at|timesince }} atrás</small>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% else %}
    <p>Você não tem notificações.</p>
    {% endif %}

    <!-- Conteúdo das menções -->
    <div class="tab-content" id="mentions">
        <h2>Menções</h2>
        {% for notification in mentions %}
        <div class="notification-item">
            <p>{{ notification.content }}</p>
            <span class="notification-time">{{ notification.created_at }}</span>
        </div>
        {% empty %}
        <p>Você não tem menções.</p>
        {% endfor %}
    </div>
</div>


<style>
    .notifications-wrapper {
        max-height: 400px;
        /* Altura máxima permitida */
        overflow-y: auto;
        /* Habilita o scroll vertical */
        padding: 15px;
        /* Espaçamento interno opcional */
        border: 1px solid #ccc;
        /* Opcional: borda para delimitar o espaço */
        background-color: #f9f9f9;
        /* Cor de fundo opcional */
        border-radius: 1px;
        /* Borda arredondada opcional */
    }

    /* Responsável por colocar o conteúdo ao lado do menu lateral */
    .content-wrapper {
        max-width: 650px;
        margin-left: 320px;
        margin-top: 120px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 1;
        /* Garante que fique acima do fundo, mas abaixo do cabeçalho */
    }

    .tabs {
        display: flex;
        border-bottom: 2px solid #ddd;
        margin-bottom: 20px;
    }

    .tab {
        flex: 1;
        text-align: center;
        padding: 10px;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .tab:hover {
        background-color: #f0f0f0;
    }

    .tab.active {
        font-weight: bold;
        color: #fff;
        background-color: #007BFF;
        border-radius: 5px 5px 0 0;
    }

    .tab-content {
        display: none;
    }

    .tab-content.active {
        display: block;
    }

    .notification-item {
        margin-bottom: 15px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

    .notification-item p {
        margin: 0;
    }

    .notification-time {
        font-size: 0.9em;
        color: gray;
    }

    .content-wrapper {
        max-width: 650px;
        margin-left: 320px;
        margin-top: 120px;
        padding: 20px;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 1;
        height: 80vh;
        /* Ajuste conforme necessário */
        overflow: hidden;
        /* Impede a rolagem da área toda */
    }

    .tabs {
        display: flex;
        justify-content: space-around;
        margin-bottom: 20px;
    }

    .tab-content {
        max-height: calc(80vh - 60px);
        /* Altura máxima para o conteúdo das notificações */
        overflow-y: auto;
        /* Barra de rolagem apenas para o conteúdo das notificações */
        padding-right: 10px;
        /* Evita que a rolagem vá até a borda */
    }

    .tab-content .notification-item {
        margin-bottom: 15px;
    }
</style>

<script>
    function showTab(tabId) {
        // Remove a classe 'active' de todas as abas e conteúdos
        document.querySelectorAll('.tab, .tab-content').forEach(el => el.classList.remove('active'));

        // Adiciona a classe 'active' na aba e no conteúdo selecionado
        document.querySelector(`.tab[onclick="showTab('${tabId}')"]`).classList.add('active');
        document.getElementById(tabId).classList.add('active');
    }
</script>
{% endblock %}